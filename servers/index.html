<!DOCTYPE html>
<html>

<head>
    <title>USUARIOS ONLINE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: sans-serif;
        }

        body {

            animation: fade-in 1s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;

        }

        .background {
            background-color: #14142c;
        }

        .server {
            margin: 10px;
            padding: 10px;
            border: 1px solid #6305d541;
            background-color: #14142c;

            animation: fade-in 1s ease-in-out;
            width: 70%;
            max-width: 400px;
            min-width: 250px;
            text-align: center;
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }

        .button{
            margin: 10px;
            padding: 10px;
            width: 70%;
            max-width: 400px;
            min-width: 250px;
            border: 1px solid #6305d541;
            background-color: #14142c;
            text-align: center;
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }



        h1 {
            color: #b0a8ffff;
            text-align: center;
            padding: 20px;
        }

        h2 {
            color: #b0a8ffff;
        }

        p {
            color: rgb(185, 177, 255);
            font-size: 17px;
        }

        hr {
            border: none;
            border-top: 1px solid #b0a8ffff;
            margin: 7px 0;

        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function fetchServerStatus(serverUrl, elementId) {
            return new Promise((resolve, reject) => {
                $.get(serverUrl, function (data) {
                    document.getElementById(elementId).textContent = `Onlines: ${data}`;
                    resolve(parseInt(data));
                });
            });
        }
    
        async function updateServerStatus() {
            const serverStatusElements = [
                { url: 'http://premium.sshtproject.com:8888/servers/online', elementId: 'premium1-status' },
                { url: 'http://premium2.sshtproject.com:8888/servers/online', elementId: 'premium2-status' },
                { url: 'http://free1.sshtproject.com:8888/servers/online', elementId: 'free1-status' },
                { url: 'http://free2.sshtproject.com:8888/servers/online', elementId: 'free2-status' },
                { url: 'http://free3.sshtproject.com:8888/server/online', elementId: 'free3-status' },
                { url: 'http://free4.sshtproject.com:8888/server/online', elementId: 'free4-status' },
                { url: 'http://free5.sshtproject.com:8888/servers/online', elementId: 'free5-status' },
                { url: 'http://free6.sshtproject.com:8888/servers/online', elementId: 'free6-status' }
            ];
    
            let totalOnline = 0;
    
            for (const server of serverStatusElements) {
                const onlineCount = await fetchServerStatus(server.url, server.elementId);
                totalOnline += onlineCount;
            }
    
            document.getElementById('total-status').textContent = `${totalOnline}`;
        }
    
        // Update the server status when the button is clicked
        document.getElementById("refresh-button").addEventListener("click", function () {
            updateServerStatus();
        });
    
        // Initial update when the page loads
        updateServerStatus();
    </script>
    

</head>

<body onload="updateServerStatus()" class="background">
    <h1>Servidores</h1>
    
    <div class="server">
        <h2>TOTAL:  <span id="total-status">Carregando...</span></h2>
    </div>
    <button id="refresh-button" class="button" style="color: #b0a8ffff; margin: 10px;">Atualizar</button>
    <div class="server">
        <h2> Premium 1</h2>
        <hr>
        <p>Onlines: <span id="premium1-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Premium 2</h2>
        <hr>
        <p>Onlines: <span id="premium2-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 1</h2>
        <hr>
        <p>Onlines: <span id="free1-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 2</h2>
        <hr>
        <p>Onlines: <span id="free2-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 3</h2>
        <hr>
        <p>Onlines: <span id="free3-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 4</h2>
        <hr>
        <p>Onlines: <span id="free4-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 5</h2>
        <hr>
        <p>Onlines: <span id="free5-status">Carregando...</span></p>
    </div>
    <div class="server">
        <h2> Free 6</h2>
        <hr>
        <p>Onlines: <span id="free6-status">Carregando...</span></p>
    </div>
</body>
<script>
    document.getElementById("refresh-button").addEventListener("click", function () {
            updateServerStatus(); // Call the function to update server status
        });
</script>
</html>